{"ast":null,"code":"var _jsxFileName = \"/home/victor/Documents/Github/bate_papo/client/src/components/Chats.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport imagePerfil from './assets/images/perfil.jpg';\nimport iconOpen from './assets/icons/open.svg';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(process.env.REACT_APP_HOST_SERVER);\nconst host = process.env.REACT_APP_HOST_SERVER;\nconst hostClient = process.env.REACT_APP_HOST_CLIENT;\nsocket.emit('online', true);\nsocket.emit('getName', localStorage.getItem('userName'));\nexport default function Chats() {\n  _s();\n  const [chats, setChats] = useState();\n  useEffect(() => {\n    if (localStorage.getItem('userName') !== null) {\n      axios.post(`${host}/getMyChats`, {\n        userName: localStorage.getItem('userName')\n      }).then(res => {\n        setChats(res.data);\n        socket.on('getUserBlocked', data => {\n          if (data.blockedUser === localStorage.getItem('userName')) {\n            console.log('vc foi bloqueado');\n            openChat(`o usuário ${data.user} lhe bloqueou, não seja babaca...`, true);\n          }\n        });\n      }).catch(error => console.log(error));\n    } else {\n      window.location.href = `${hostClient}/signin`;\n    }\n  }, []);\n  const openModal = (msg, reload) => {\n    const ctrModal = document.querySelector('.ctr-modal');\n    ctrModal.classList.remove('close');\n    document.querySelector('.modal p').innerHTML = msg;\n    document.addEventListener('keydown', key => {\n      key = key.key;\n      if (key === 'Enter' || key === 'Escape') {\n        if (reload === true) {\n          closeModal();\n        }\n      }\n    });\n    document.querySelector('.ctr-modal #buttonModalClose').addEventListener('click', () => {\n      closeModal();\n    });\n  };\n  const closeModal = () => {\n    document.querySelector('.ctr-modal').classList.add('close');\n    document.querySelector('.ctr-modal button').focus();\n  };\n  const openChat = (chatName, friendName) => {\n    document.querySelector('main').classList.add('opacity-0');\n    localStorage.setItem('chatName', chatName);\n    setTimeout(() => {\n      window.location.href = '/chat';\n    }, 1000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: typeof chats !== 'undefined' && chats.map(chat => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat\",\n        onClick: () => {\n          openChat(chat.name);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ctr-infoUser\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ctr-picture\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imagePerfil,\n              className: \"picture\",\n              alt: `foto de perfil do usuário ${chat.name}`\n            }, `picture_user-${chat.name}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this)\n          }, `picture-${chat.name}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"infoUser\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: chat.name\n            }, `name_user-${chat.name}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"body-small msg\",\n              children: chat.message.text\n            }, `message-${chat.name}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this)]\n          }, `info_user-${chat.name}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, `ctr_info_user-${chat.name}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ctr-infoChat\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"caption-small\",\n            children: chat.message.date\n          }, `date_message-${chat.name}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"infoChat\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: iconOpen,\n              className: \"openChat\",\n              alt: \"abrir o chat\"\n            }, `openChat-${chat.name}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this)\n          }, `info_chat-${chat.name}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, `ctr_info_chat-${chat.name}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)]\n      }, `chat-${chat.name}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n}\n_s(Chats, \"R7Klf66kcqGdsedPt19fu6e6Efk=\");\n_c = Chats;\nvar _c;\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["React","useEffect","useState","axios","imagePerfil","iconOpen","io","socket","process","env","REACT_APP_HOST_SERVER","host","hostClient","REACT_APP_HOST_CLIENT","emit","localStorage","getItem","Chats","chats","setChats","post","userName","then","res","data","on","blockedUser","console","log","openChat","user","catch","error","window","location","href","openModal","msg","reload","ctrModal","document","querySelector","classList","remove","innerHTML","addEventListener","key","closeModal","add","focus","chatName","friendName","setItem","setTimeout","map","chat","name","message","text","date"],"sources":["/home/victor/Documents/Github/bate_papo/client/src/components/Chats.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios'\nimport imagePerfil from './assets/images/perfil.jpg'\nimport iconOpen from './assets/icons/open.svg'\nimport { io } from 'socket.io-client'\nconst socket = io(process.env.REACT_APP_HOST_SERVER)\nconst host = process.env.REACT_APP_HOST_SERVER\nconst hostClient = process.env.REACT_APP_HOST_CLIENT\n\nsocket.emit('online', true)\nsocket.emit('getName', localStorage.getItem('userName'))\n\nexport default function Chats () {\n    const [chats, setChats] = useState()\n\n    useEffect(() => {\n        if (localStorage.getItem('userName') !== null) {\n            axios.post(`${host}/getMyChats`, {\n                userName: localStorage.getItem('userName')\n            }).then((res) => {\n                setChats(res.data)\n\n                socket.on('getUserBlocked', (data) => {                    \n                    if (data.blockedUser === localStorage.getItem('userName')) {\n                        console.log('vc foi bloqueado')\n                        openChat(`o usuário ${data.user} lhe bloqueou, não seja babaca...`, true)\n                    }\n                })\n            }).catch((error) => console.log(error))\n        } else {\n            window.location.href = `${hostClient}/signin`\n        }\n    },[])\n\n    const openModal = (msg, reload) => {\n        const ctrModal = document.querySelector('.ctr-modal')\n\n        ctrModal.classList.remove('close')\n        document.querySelector('.modal p').innerHTML = msg\n\n        document.addEventListener('keydown', (key) => {\n            key = key.key\n            \n            if (key === 'Enter' || key === 'Escape') {\n                if (reload === true) {\n                    closeModal()\n                }\n            }\n        })\n\n        document.querySelector('.ctr-modal #buttonModalClose').addEventListener('click', () => {\n            closeModal()\n        })\n    }\n\n    const closeModal = () => {\n        document.querySelector('.ctr-modal').classList.add('close')\n        document.querySelector('.ctr-modal button').focus()\n    }\n\n    const openChat = (chatName, friendName) => {\n        document.querySelector('main').classList.add('opacity-0')\n\n        localStorage.setItem('chatName', chatName)\n        setTimeout(() => {\n            window.location.href = '/chat'\n        }, 1000)\n\n    }\n\n    return (\n        <div className=\"chats\">\n            {typeof(chats) !== 'undefined' && chats.map(chat => {\n                return (\n                <div className=\"chat\" key={`chat-${chat.name}`} onClick={() => {\n                    openChat(chat.name)\n                }}>\n                    <div className=\"ctr-infoUser\" key={`ctr_info_user-${chat.name}`}>\n                        <div className=\"ctr-picture\" key={`picture-${chat.name}`}>\n                            <img \n                                key={`picture_user-${chat.name}`} \n                                src={imagePerfil} \n                                className=\"picture\"\n                                alt={`foto de perfil do usuário ${chat.name}`}\n                            />\n                        </div>\n            \n                        <div key={`info_user-${chat.name}`} className=\"infoUser\">\n                            <p key={`name_user-${chat.name}`}>{chat.name}</p>\n                            <p key={`message-${chat.name}`} className=\"body-small msg\">{chat.message.text}</p>\n                        </div>\n                    </div>  \n            \n                    <div className=\"ctr-infoChat\" key={`ctr_info_chat-${chat.name}`}>\n                        <span key={`date_message-${chat.name}`} className=\"caption-small\">\n                            {chat.message.date}\n                        </span>\n            \n                        <div key={`info_chat-${chat.name}`} className=\"infoChat\">               \n                            <img key={`openChat-${chat.name}`} src={iconOpen} className=\"openChat\" alt=\"abrir o chat\" />\n                        </div>\n                    </div>\n                </div>\n                )\n            })}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}